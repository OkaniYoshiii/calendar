{{ block "main" . }}
    <div>
        <h1>Calendrier partage de la mascotte</h1>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {{ range $i, $month := $.Calendar.Months }}
                <div style="margin-bottom: 32px;">
                    <p>{{ $month.Label }}</p>
                    <div class="grid grid-cols-7">
                        <p>Lun</p>
                        <p>Mar</p>
                        <p>Mer</p>
                        <p>Jeu</p>
                        <p>Ven</p>
                        <p>Sam</p>
                        <p>Dim</p>
                    </div>
                    {{ range $week := $month.Weeks }}
                        <div class="grid grid-cols-7">
                            {{ range $day := $week.Days}}
                                <div>
                                    {{ $childs := $day.Payload.Childs }}
                                    {{ if gt (len $childs) 0  }}
                                        <button data-dialog-id="dialog_{{ $day.Time.String }}" style="background-color: blue; {{ if $day.IsSame $.Now }} background-color: red; {{ end }}">{{ $day.Value }}</button>
                                        <dialog id="dialog_{{ $day.Time.String }}">
                                            <div>
                                                {{ range $child := $childs }}
                                                    <p>Anniversaire de : {{ $child.Name }}</p>
                                                {{ end }}
                                            </div>
                                        </dialog>
                                    {{ else }}
                                        <p style="{{ if $day.IsSame $.Now }} background-color: red; {{ end }}">{{ $day.Value }}</p>
                                    {{ end }}
                                </div>
                            {{ end }}
                        </div>
                    {{ end }}
                </div>
            {{ end }}
        </div>
    </div>

    <script>
      const buttons = document.querySelectorAll('[data-dialog-id]');

      buttons.forEach((button) => {
        const id = button.getAttribute('data-dialog-id');
        const dialog = document.getElementById(id);

        button.addEventListener('click', () => {
          dialog.showModal();
        })
      })
    </script>
{{ end }}
